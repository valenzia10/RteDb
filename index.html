<!doctype html>
<html ng-app = "rteDbApp">

<head>
  <title> RteDb - Port definition tool  </title>
</head>

<body>

  <h1> RteDb - Port definition tool </h1>

  <div ng-view />
  
  <script type="text/ng-template" id="port-list-view.html">
    <sppan> Import data from JSON file: </span>
    <input type="file" custom-on-change="importJson" />
    
    <br/>
    <p> Add a new port, or select an existing one to edit it </p>
    
    <table id="port-list">
      <tr>
        <td> Name </td>
        <td> Provider SW-C </td>
        <td/>
      </tr>
      <tr ng-repeat="port in ports">
        <td> {{port.name}} </td>
        <td> {{port.provider}} </td>
        <td> <button ng-click="clicked(port.name)"> Edit </button> </td>
        <td> <button ng-click="remove(port.name)"> Delete </button> </td>
      </tr>
    </table>
    
    <button ng-click="clicked(false)"> Add a new port </button>
    <br/>
    <br/>
    <button ng-click="generate()"> Generate DB and code files </button>
  </script>  
  
  <script type="text/ng-template" id="port-info-view.html">
    <p> Edit port information </p>
    
    <table id="port-info">
      <tr>
        <td> Name: </td>
        <td>
          <input id="port-name" type="text" ng-model="portName" />
        </td>
      </tr>
      <tr>
        <td> Provider SW-C: </td>
        <td>
          <select id="port-provider" ng-model="portProvider" 
                                     ng-options="prov for prov in providers">
          </select> 
        </td>
      </tr>
      <tr>
        <td> Data type: </td>
        <td> 
          <select id="port-data-type" ng-model="portType" 
                                      ng-options="typ for typ in types">
          </select> 
        </td>
      </tr>
      <tr>
        <td> Initial raw value: </td>
        <td>
          <input id="port-init" type="text" ng-model="portInit" />
        </td>
      </tr>
      <tr>
        <td> Physical unit: </td>
        <td>
          <input id="port-unit" type="text" ng-model="portUnit" />
        </td>
      </tr>
      <tr>
        <td> Internal to physical resolution: </td>
        <td>
          <input id="port-resolution" type="text" ng-model="portRes" />
        </td>
      </tr>
      <tr>
        <td> Internal to physical offset: </td>
        <td>
          <input id="port-offset" type="text" ng-model="portOffs" />
        </td>
      </tr>
      <tr>
        <td> Signal type: </td>
        <td>
          <select id="port-signal-type" ng-model="portSigType" 
                                        ng-options="sigt for sigt in sig_types">
          </select>
        </td>
      </tr>
      <tr>
        <td> CAN signal name (DBC): </td>
        <td>
          <input id="port-can-name" type="text" ng-model="portCanSignal" />
        </td>
      </tr>
      <tr>
        <td> CAN  to physical resolution (optional, same as DBC): </td>
        <td>
          <input id="port-can-resolution" type="text" ng-model="portCanRes" />
        </td>
      </tr>
      <tr>
        <td> CAN to physical offset (optional, same as DBC): </td>
        <td>
          <input id="port-can-offset" type="text" ng-model="portCanOffs" />
        </td>
      </tr>
    </table>
    
    <button ng-click="save()"> Save info </button>
    <button ng-click="cancel()"> Cancel </button>
  </script>
  
  <script src="./js/angular.js"></script>
  <script src="./js/angular-route.js"></script>
  <script src="./js/data.js"></script>
  <script src="./js/app.js"></script>
</body>


</html>